<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="./style.css" rel="stylesheet">
    <title>Web-Usability</title>
  </head>
  <body class="min-vw-100">
    <div class="contaif" style="height:100vh">
    <nav class="navbar navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img src="/docs/5.0/assets/brand/bootstrap-logo.svg" alt="" width="30" height="24" class="d-inline-block align-text-top">
          International Institute of Information And Technology, Hyderabad 
        </a>
        <div class="d-flex">
          <button class="btn me-2 btn-outline-success" type="submit">Search</button>
          <button class="btn me-2  btn-outline-success" type="submit">Search</button>
       </div>
      </div>
    </nav>

    <div class="d-flex" id="overview">
      <div class="carousel-caption" style="top:50%; position:absolute; z-index:100; ">
        <div class="row justify-content-around">
        <button id="observer" class="btn col-3 btn-success" type="submit" data-bs-toggle="modal" data-bs-target=".login-register-form">Observer</button>
        <button id="participant" class="btn col-3 btn-primary" type="submit" data-bs-toggle="modal" data-bs-target=".login-register-form">Participant</button>
        </div>
      </div>
      
      <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel" style="z-index: -10;">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="images/banner2.png" class="d-block w-100" alt="...">
          </div>
        </div>
      </div>
      
    </div>
   <!-- Login / Register Modal-->
   <div class="modal fade login-register-form" role="dialog" style="height:80vh;top:80px">
       <div class="modal-dialog modal-md">
           <div class="modal-content">
               <div class="modal-header">
                   <ul class="nav nav-tabs">
                       <li class="nav-item" role="presentation"><button class="nav-link active"data-bs-toggle="tab" data-bs-target="#loginDiv" type="button" role="tab" aria-controls="loginDiv" aria-selected="true"> Login </a></li>
                       <li class="nav-item" role="presentation"> <button class="nav-link" data-bs-toggle="tab" data-bs-target="#registrationDiv" type="button" role="tab" aria-controls="registrationDiv" aria-selected="false"> Register <span class="glyphicon glyphicon-pencil"></span></a></li>
                   </ul>
                   <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
               </div>
               <div class="modal-body">
                   <div class="tab-content">
                       <div id="loginDiv" class="active tab-pane fade in show">
                           <form id="login-form" request="/login">
                               <div class="form-group">
                                   <label for="email">Email:</label>
                                   <input type="email" class="form-control" id="email" placeholder="Enter email" name="email">
                               </div>
                               <div class="form-group">
                                   <label for="password">Password:</label>
                                   <input type="password" class="form-control" id="password" placeholder="Enter password" name="password">
                               </div>
                               <div class="checkbox">
                                   <label><input type="checkbox" name="remember"> Remember me</label>
                               </div>
                               <div>
                              <hr>
                              <div class="visually-hidden alert alert-danger" role="alert">
                                Invalid Details!
                              </div>
                              <button type="submit" class="btn btn-primary">Login</button>
                                </div>
                           </form>
                       </div>
                       <div id="registrationDiv" class="tab-pane fade">
                           <form id="registration-form" request="/register">
                               <div class="form-group">
                                   <label for="name">Your Name:</label>
                                   <input type="text" class="form-control" id="name" placeholder="Enter your name" name="name">
                               </div>
                               <div class="form-group">
                                   <label for="email">Email:</label>
                                   <input type="email" class="form-control" id="email" placeholder="Enter new email" name="email">
                               </div>
                               <div class="form-group">
                                   <label for="password">Password:</label>
                                   <input type="password" class="form-control" id="password" placeholder="New password" name="password">
                               </div>
                              <hr>
                               <button type="submit" class="btn btn-primary me-2">Register</button>
                           </form>
                       </div>

                   </div>
               </div>
           </div>
       </div>
   </div> 
  <footer id="footer">
    <div class="container-fluid">
       <div class="row-fluid" style="margin-top: 20px;font-size: 13px;">
          <div class="container">
             <div class="copyright">Â© <span id="copyright-year">2021-2022</span> Software Engineering Research Center (SERC), IIIT-Hyderabad.</div>
             </div>
          </div>
       </div>
    </div>
  </footer>
 </div>
 <script src="https://code.jquery.com/jquery-3.6.0.slim.js" integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
     <!-- CSS only -->
     <!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
      <script> //$('.carousel').carousel(); 
        user=["participant","observer"];
        var server_address="http://localhost:3001/"
        var request;
        var url="";
        var x=0;
        $("#participant").click(function(){
            x=0;
        });
        $("#observer").click(function(){
            x=1;
        });
        async function postFormDataAsJson({ url, formData }) {
          const plainFormData = Object.fromEntries(formData.entries());
          const formDataJsonString = JSON.stringify(plainFormData);
          console.log(formDataJsonString);
          const fetchOptions = {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
            },
            body: formDataJsonString,
          };

          const response = await fetch(url, fetchOptions);

          if (!response.ok) {
            const errorMessage = await response.text();
            throw new Error(errorMessage);
          }

          return response.json();
        }

      async function handleSubmit(event) {
        event.preventDefault();
        
         const form = event.currentTarget;
        // request = form.getAttribute("request");
        // const url = server_address+user[x]+request;
        // console.log(url);
        // try {
           const formData = new FormData(form);
        //   const responseData = await postFormDataAsJson({ url, formData });
        //   console.log({ responseData });
        //   let responseObj = JSON.parse(responseData);
         // if(responseObj[message]=="valid participant"){
              sessionStorage.setItem('user_email',formData.get('email'));
              sessionStorage.setItem('user_type',formData.get(user[x]));
              sessionStorage.setItem('server_address',formData.get(user[x]));
              window.location.replace(server_address+"projectpage.html");
        //   }else{
        //        alert("Invalid Details"));
        //   }
          
        // } catch (error) {
        //   console.error(error);
        // }
      }
        const loginForm = document.getElementById("login-form");
        loginForm.addEventListener("submit", handleSubmit);
        const registerForm = document.getElementById("registration-form");
        registerForm.addEventListener("submit", handleSubmit);
      </script>
  </body>
</html>
